function RadarFactory(t,e){function a(t){return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}if(this.init=function(){},t){var n=t.offsetWidth,o=t.offsetHeight,r=t.offsetLeft,l=t.offsetTop,s=document.createElement("canvas");t.appendChild(s);var d=(s=t.getElementsByTagName("canvas")[0]).getContext("2d"),f=a(d)||1;s.width=n*f,s.height=o*f,s.style.width=n+"px",s.style.height=o+"px";var y=g({scale:1,origin:[s.width/2,s.height/2],showTooltip:!1},e.config),p=.5*Math.min(s.width,s.height)*.6*y.scale;y.font.fontSize=y.font.fontSize||12*f,y.radius=y.radius?y.radius:p,y.bg=g({layer:7,evenFillStyle:"#fff",oddFillStyle:"#eee",evenStrokeStyle:"#ddd",oddStrokeStyle:"#ddd"},y.bg),y.dataFill=g({fillStyle:"transparent"},y.dataFill),y.dataLine=g({strokeStyle:"red",lineWidth:2*f},y.dataLine),y.dataCircle=g({r:2*f,strokeStyle:"red",lineWidth:2*f,fillStyle:"#fff"},y.dataCircle),y.tooltip=g({r:y.dataCircle.r,offsetX:0,offsetY:0},y.tooltip),y.font=g({fontStyle:y.font.fontSize+"px Pingfang SC,STHeiti,Lantinghei SC,Open Sans,Arial,Hiragino Sans GB,Microsoft YaHei,WenQuanYi Micro Hei,SimSun,sans-serif",fontColor:"#000",mathColor:"#000"},y.font);var c=g({description:[],tooltipsString:[],maxValue:[],value:[],percent:[]},e.data),h={};function S(){var t=c.value?c.value.length:0;h.n=t,h.dataRadiusOfPercent=[],h.dataRadius=[],h.angleArr=[],h.tooltipsContentArr=[];for(var e=2*Math.PI/h.n,i=0;i<t;i++)h.dataRadiusOfPercent[i]=c.value[i]/c.maxValue[i],h.dataRadius[i]=h.dataRadiusOfPercent[i]*y.radius,h.angleArr[i]=i*e,y.showTooltip&&("function"==typeof c.tooltipsString?h.tooltipsContentArr[i]=c.tooltipsString(c.description[i],c.value[i],c.maxValue[i]):"String"==typeof c.tooltipsString?h.tooltipsContentArr[i]=c.tooltipsString:h.tooltipsContentArr[i]=c.description[i]+": <br>\u6700\u5927\u503c: "+c.maxValue[i]+"<br>\u5f53\u524d\u503c\uff1a"+c.value[i])}function u(){var t=0,e=null;!function i(){e=window.requestAnimationFrame(i,s),(t+=.05)>=1&&window.cancelAnimationFrame(e);var a=h.dataRadius.map(function(e){return e*t}),n=v(h.n,y.radius,a,h.angleArr);d.clearRect(0,0,s.width,s.height),b({n:h.n,r:y.radius,data:c.description,mathData:c.value,percent:c.percent,origin:y.origin,fontStyle:y.font.fontStyle,fontColor:y.font.fontColor,mathColor:y.font.mathColor}),R({layer:y.bg.layer,n:h.n,r:y.radius,origin:y.origin,evenFillStyle:y.bg.evenFillStyle,oddFillStyle:y.bg.oddFillStyle,evenStrokeStyle:y.bg.evenStrokeStyle,oddStrokeStyle:y.bg.oddStrokeStyle}),m({dataLineOptions:{dataPoints:n,strokeStyle:y.dataLine.strokeStyle,lineWidth:y.dataLine.lineWidth},dataFillOptions:{dataPoints:n,fillStyle:y.dataFill.fillStyle},dataCircleOptions:{dataPoints:n,r:y.dataCircle.r,strokeStyle:y.dataCircle.strokeStyle,fillStyle:y.dataCircle.fillStyle,lineWidth:y.dataCircle.lineWidth}})}()}function g(t,e){var i={};for(var a in t)i[a]=t[a];for(var a in e)i[a]=e[a];return i}function v(t,e,i,a){t=t||6,i=i||[],a=a||[];for(var n=[],o=0;o<t;o++){var r={};r.x=i[o]*Math.sin(a[o]),r.y=-i[o]*Math.cos(a[o]),n.push(r)}return n}function m(t){var e=t.dataLineOptions||{},i=t.dataFillOptions||{},a=t.dataCircleOptions||{};C(e),x(i),k(a)}function C(t){var e=t.strokeStyle?t.strokeStyle:"red",i=t.lineWidth?t.lineWidth:2,a=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=a.length,dataPointsPosArrayLen=a.length,d.save(),d.beginPath(),d.translate(y.origin[0],y.origin[1]),d.moveTo(a[0].x,a[0].y);for(var n=1;n<dataPointsPosArrayLen;n++)d.lineTo(a[n].x,a[n].y);d.closePath(),d.strokeStyle=e,d.lineWidth=i,d.lineJoin="round",d.stroke(),d.restore()}function x(t){var e=t.fillStyle?t.fillStyle:"transparent",i=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=i.length,d.save(),d.beginPath(),d.translate(y.origin[0],y.origin[1]),d.moveTo(i[0].x,i[0].y);for(var a=1;a<dataPointsPosArrayLen;a++)d.lineTo(i[a].x,i[a].y);d.closePath(),d.fillStyle=e,d.fill(),d.restore()}function k(t){var e=t.r?t.r*f:1*f,i=t.strokeStyle?t.strokeStyle:"#000",a=t.lineWidth?t.lineWidth*f:1*f,n=t.fillStyle?t.fillStyle:"#222",o=t.dataPoints?t.dataPoints:[];dataPointsPosArrayLen=o.length;for(var r=0;r<dataPointsPosArrayLen;r++)P({x:o[r].x,y:o[r].y,r:e,originX:y.origin[0],originY:y.origin[1],strokeStyle:i,lineWidth:a,fillStyle:n})}function P(t){var e=t.x?t.x:0,i=t.y?t.y:0,a=t.r?t.r:10,n=t.originX?t.originX:0,o=t.originY?t.originY:0,r=t.strokeStyle?t.strokeStyle:"#000",l=t.lineWidth?t.lineWidth:2,s=t.fillStyle?t.fillStyle:"#fff";d.save(),d.beginPath(),d.translate(n,o),d.arc(e,i,a,0,2*Math.PI),d.closePath(),d.strokeStyle=r,d.lineWidth=l,d.lineJoin="round",d.fillStyle=s,d.stroke(),d.fill(),d.restore()}function A(e){var i=e.tooltipEle?e.tooltipEle:null,a=e.tootipContentArray?e.tootipContentArray:[],n=e.tooltipOffsetX?e.tooltipOffsetX:0,o=e.tooltipOffsetY?e.tooltipOffsetY:0,s=e.dataCircleRadius?e.dataCircleRadius:10,d=v(h.n,y.radius,h.dataRadius,h.angleArr);if(dataPointsPosArrayLen=d.length,i){var f=!1,p=i;t.addEventListener("mousemove",function(t){for(var e=0;e<dataPointsPosArrayLen;e++){f=!1;if(d[e]&&Math.pow(t.pageX-r-d[e].x-y.origin[0],2)+Math.pow(t.pageY-l-d[e].y-y.origin[1],2)<=Math.pow(s,2)){p.style.left=t.pageX-r+n+"px",p.style.top=t.pageY-l+o+"px",p.innerHTML=a[e],f=!0;break}}p.style.display=f?"block":"none"})}}function F(t,e,a){t=t||5,e=e||30;var n=[],o=2*Math.PI/t;for(i=0;i<t;i++){var r={};r.x=e*Math.sin(i*o)+a[0],r.y=-e*Math.cos(i*o)+a[1],n.push(r)}return n}function w(t){var e=t.n?t.n:5,a=t.r?t.r:30,n=t.origin?t.origin:[0,0],o=t.fillStyle?t.fillStyle:"transparent",r=t.strokeStyle?t.strokeStyle:"#000",l=t.lineWidth?t.lineWidth*f:1*f,s=t.lineCap?t.lineCap:"butt";d.save(),d.beginPath();var y=2*Math.PI/e;for(d.translate(n[0],n[1]),d.moveTo(0,-a),i=0;i<e;i++)d.rotate(y),d.lineTo(0,-a);d.closePath(),t.strokeStyle&&(d.strokeStyle=r,d.lineWidth=l,d.lineCap=s,d.stroke()),t.fillStyle&&(d.fillStyle=o,d.fill()),d.restore()}function b(t){var e=t.data?t.data:[],i=t.mathData?t.mathData:[],a=t.percent?t.percent:[],n=t.n?t.n:5,o=t.r?t.r:30,r=t.origin?t.origin:[0,0],l=t.limit?t.limit:20,s=t.fontStyle?t.fontStyle:"",p=t.fontColor?t.fontColor:"#000",c=t.mathColor?t.mathColor:"#000",h=F(n,o,r);d.save(),d.font=s;for(var S=0;S<e.length;S++){var u=h[S].x,g=h[S].y;Math.abs(h[S].x-r[0])>=l?h[S].x-r[0]>0?(d.textAlign="left",u+=12):h[S].x-r[0]<0&&(d.textAlign="right",u-=12):d.textAlign="center",Math.abs(h[S].y-r[1])>=o-l&&(h[S].y-r[1]<0?g-=y.font.fontSize+1*f+12:h[S].y-r[1]>0&&(g+=18,"left"===d.textAlign&&(u-=6),"right"===d.textAlign&&(u+=6))),d.fillStyle=p,d.fillText(e[S],u,g),d.fillStyle=c,IsN=isNaN(a[S])?"":" (>"+a[S]+"%)",d.fillText((100*i[S]).toFixed(0)+IsN,u,g+y.font.fontSize+1*f)}d.restore()}function R(t){for(var e=t.layer?t.layer:5,i=t.n?t.n:5,a=t.r?t.r:50,n=t.origin?t.origin:[0,0],o=t.evenStrokeStyle?t.evenStrokeStyle:"#ccc",r=t.oddStrokeStyle?t.oddStrokeStyle:"#ccc",l=t.evenFillStyle?t.evenFillStyle:"#eee",s=t.oddFillStyle?t.oddFillStyle:"transparent",f=[],y=a/e,p=0;p<e;p++)f[p]=y*(p+1);f=f.reverse();for(p=0;p<e;p++)w(p%2!=0?{n:i,r:f[p],origin:n,fillStyle:l,strokeStyle:o,lineWidth:1}:{n:i,r:f[p],origin:n,fillStyle:s,strokeStyle:r,lineWidth:1});d.save(),d.beginPath();var c=F(i,a,n);for(p=0;p<i;p++)d.moveTo(n[0],n[1]),d.lineTo(c[p].x,c[p].y);d.strokeStyle=o,d.lineWidth=1,d.stroke(),d.restore()}this.init=function(){S(),t.style.position="relative",u(),y.showTooltip&&(h.tooltipEle=document.createElement("div"),h.tooltipEle.className="radar-tooltips",h.tooltipEle.style.position="absolute",h.tooltipEle.style.display="none",t.appendChild(h.tooltipEle),A({tooltipEle:t.getElementsByClassName("radar-tooltips")[0],tootipContentArray:h.tooltipsContentArr,tooltipOffsetX:y.tooltip.offsetX,tooltipOffsetY:y.tooltip.offsetY,dataCircleRadius:y.tooltip.r}))},this.getPolygonPos=function(){F(h.n,y.radius,y.origin)}}}var radarChart={init:function(t,e){new RadarFactory(t,e).init()}};window.__radarLocales={"zh-CN":{property:["\u4ee3\u7801\u6d3b\u8dc3\u5ea6","\u793e\u533a\u6d3b\u8dc3\u5ea6","\u56e2\u961f\u5065\u5eb7","\u6d41\u884c\u8d8b\u52bf","\u5f71\u54cd\u529b"],transcend:{header:"\u8d85\u8fc7 ",end:" \u9879\u76ee",text:"\u7efc\u5408\u5f97\u5206",exponent:" Gitee \u6307\u6570\u4e3a"},nodata:"\u9884\u8ba1\u4e00\u5468\u540e\u63d0\u4f9b Gitee \u6307\u6570",updatetime:"\u4e0a\u6b21\u66f4\u65b0\u4e8e "},"zh-TW":{property:["\u7a0b\u5f0f\u78bc\u6d3b\u8e8d\u5ea6","\u793e\u5340\u6d3b\u8e8d\u5ea6","\u5718\u968a\u5065\u5eb7","\u6d41\u884c\u8da8\u52e2","\u5f71\u97ff\u529b"],transcend:{header:"\u8d85\u904e ",end:" \u9805\u76ee",text:"\u7d9c\u5408\u5f97\u5206",exponent:" Gitee \u6307\u6578\u70ba"},nodata:"\u9810\u8a08\u4e00\u5468\u5f8c\u63d0\u4f9b Gitee \u6307\u6578",updatetime:"\u4e0a\u6b21\u66f4\u65b0\u65bc "},en:{property:["Activity","Community","Health","Trend","Influence"],transcend:{header:"surpass ",end:" projects",text:"Rank",exponent:" gitee rank is"},nodata:"Gitee Rank is expected to be provided in a week",updatetime:"Last update on "}};var isRadarChartInited=!1;$(window.initRadarChart=function(){if(!isRadarChartInited){var t,e=gon.locale||"zh-CN",i=window.__radarLocales,a=[.15,.2,.1,.25,.3],n=i[e],o=$(".radar-qa"),r=$("#metrics-radar"),l=r.find(".wrap"),s=r.find(".radar-popup"),d=r.find(".total-score"),f=d.find(".text"),y=d.find(".score"),p=r.data("url"),c=$(".finaltime"),h={config:{bg:{layer:3,evenFillStyle:"#F2F4F6",oddFillStyle:"#F8F9FA",evenStrokeStyle:"#DCE3E8",oddStrokeStyle:"#DCE3E8"},dataFill:{fillStyle:"RGBA(254, 115, 0, .2)"},dataLine:{strokeStyle:"RGBA(254, 115, 0, .5)",lineWidth:2},dataCircle:{r:3,strokeStyle:"transparent",fillStyle:"transparent",lineWidth:2},font:{fontColor:"#537C8D",mathColor:"#9B9B9B"}}};l.height(191),radarChart.init(l[0],h),p&&$.getJSON(p).success(function(e){var i=e;if(null===i)return r.html('<span class="text-muted">'+n.nodata+"</span>"),void s.remove();var p=[i.vitality,i.community,i.health,i.trend,i.influence],S=[i.vitality_percent,i.community_percent,i.health_percent,i.trend_percent,i.influence_percent],u=0,g=[],v=n.property,m=[],C=$.extend({},h,{data:{maxValue:m,value:p,description:v,percent:g}});for(C.config.dataCircle.strokeStyle="#FE7300",C.config.dataCircle.fillStyle="#FE7300",t=0;t<S.length;++t)g.push(parseInt(100*S[t],0)),m.push(1),u+=Number(100*p[t])*a[t];l.find("canvas").remove(),radarChart.init(l[0],C),l.removeClass("skeleton"),c.html(n.updatetime+i.updated_at.substring(0,10)),f.text(n.transcend.text),y.text(u.toFixed(0)),d.removeClass("hide"),o.show().popup({hoverable:!0,popup:s}),isRadarChartInited=!0})}});